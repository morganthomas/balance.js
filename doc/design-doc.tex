\documentclass{article}

\title{balance.js Design Document}
\author{Morgan Thomas\footnote{This document is copyright 2017 Morgan Thomas. You may distribute this document to IHS Markit colleagues. All other rights reserved.}}

\begin{document}

\maketitle

balance.js is an implementation in progress of a general information presentation solution making solution. It addresses the problem of drawing graphics on the basis of a high-level description of an information presentation. It thus addresses the same basic problem addressed, for example, by Web browser implementations of the HTML, CSS, and DOM standards.

In its present form, balance.js is a JavaScript library which produces graphics in Web pages by sending drawing instructions to an HTML canvas element. The same ideas and code can in theory be adapted to address information presentation problems in other contexts, such as mobile apps, PDF and image generation, and (with more research) 3D/VR user interfaces.

balance.js is an immature system. There is more theoretical progress than there is progress in implementation. There is significant progress in both areas, the result of over two years of R\&D Morgan has done. There remains much progress yet to be made. Morgan's primary focus has been on devising the core document layout algorithms. The primary area of issues remaining to be addressed, to achieve a production-ready product, is extending these core layout algorithms to create a developer-friendly API for creating information presentation solutions.

This document aims to describe balance.js in high-level terms. The focus is on parts of balance.js that exist or are on the cusp of existing.

\section{Visual elements and semantic elements}

balance.js has two core concepts: the concepts of \emph{visual elements}\/ and \emph{semantic elements}. A semantic element is a meaningful unit of information which is not tied to any specific form of presentation. A visual element is a unit of visual information presentation, or in other words a unit of information tied to a specific visual presentation thereof.

Like HTML elements, semantic elements and visual elements are both composable. You can compose semantic elements to make new semantic elements. You can compose visual elements to make new visual elements. A semantic document is a semantic element which represents a complete document (divorced from a specific form of presentation). A visual document, similarly, is a visual element which represents a complete document (in a specific visual presentation form).

The basic reason for this distinction between semantic and visual elements is to assist in making information presentation solutions which are accessible to non-visual users. A semantic element can be transformed into a visual element which is a presentation of the semantic element. Alternatively, a semantic element can be presented in a form which is accessible to screen readers and other non-graphical software. (Ideally this would happen automatically as a feature of the framework, without requiring additional coding.)

The distinction between semantic and visual elements is analogous to the conceptual separation between semantics and presentation in the HTML and CSS standards. The W3C recommends that one should write one's HTML to represent the semantic meaning of one's document, and that one should use CSS to encode the information about how to present it visually.

In practice, in HTML and CSS, it's difficult to achieve a perfect separation between meaning and presentation concerns. I would say this has to do with facts about the design of HTML and CSS. In HTML/CSS, the semantic document structure is the same hierarchical structure used to generate a visual presentation. The DOM is the semantic document, and it is also the hierarchical structure of the visual document. This means that one is sometimes constrained by assumptions implicitly built into the HTML/CSS standards about how the semantic meaning and the visual presentation of HTML/CSS documents are connected. This is an obstacle to achieving in practice the separation between semantics and presentation which the W3C recommends.

In the design of balance.js, the semantic document and the visual document are generated by different element trees. The visual element hierarchy can be generated by any function on the semantic element hierarchy. There are therefore no constraints on how one derives a visual document from a semantic document. This should allow the separation between semantic and presentation concerns to approach completeness in complicated scenarios more easily and more perfectly than in HTML and CSS.

In the current implementation there is no concept of semantic elements. The foregoing comments on semantic elements represent designed ideas, not implemented code. In the current implementation there is only so far a concept of visual elements.

\section{Visual elements}

A visual element can be called, for short, a \emph{velement}. A velement is an object which must have two properties: a \emph{layout problem}, and a \emph{rendering function}. 

\end{document}
